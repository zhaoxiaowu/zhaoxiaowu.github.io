---
layout: post
category: 开发
---
## GIT基础

[W3Cschool git教程](https://www.w3cschool.cn/git/)



## 一人多任务

https://blog.csdn.net/ericwang_1992/article/details/54136733

## IDEA Pull

`git pull` 是 `git fetch + git merge FETCH_HEAD` 的缩写。

`git pull`就是先`fetch`，然后执行`merge` 操作，如果加*`--rebase`*参数，就是使用`git rebase` 代替`git merge`。

`Idea update project` 就是你可以选择到底是merge 还是 rebase 的git pull

## Merge 和 Reabase的区别

[git merge和git rebase的区别, 切记：永远用rebase](https://zhuanlan.zhihu.com/p/75499871)

[在开发过程中使用git rebase还是git merge，优缺点分别是什么？](https://www.zhihu.com/question/36509119/answer/131513261)

rebase可以确保生产分支commit是一个线性结构，方便rollback

## cherry-pick

cherry-pick类似于一个定制化的merge，它可以把其它分支上的commit一个个摘下来，合并到当前分支。

[一个可以提高开发效率的命令：cherry-pick](https://zhuanlan.zhihu.com/p/58962086)

## Git标签

如果你达到一个重要的阶段，并希望永远记住那个特别的提交快照，你可以使用 git tag 给它打上标签

```
git tag -a v1.0   //-a 带注解的标签
```

[Git 标签](https://www.w3cschool.cn/git/git-tag.html)

## 回到merge之前的代码

`git rebase/merge --abort 回到执行 rebase 之前`

## 分支策略

https://www.w3cschool.cn/git/git-4nu52kvb.html



**主分支**

- master: 生产环境准备就绪的状态的主分支。

- develop: 开发分支，该源代码还被作为了自动化任务的来源。

每当 develop 分支到达一个稳定的阶段，可以对外发布时，所有的改变都会被合并到master 分支，并打一个发布版本的 tag。

因此，每次改动被合并到 master 的时候，这就是一个真正的新的发布产品。我们建议对此进行严格的控制，因此理论上我们可以为每次 master 分支的提交都挂一个钩子脚本，向生产环境自动化构建并发布我们的软件。

**支持型分支**

这些分支的生命周期都是有限的，它们最终都会被删除掉。

- feature 分支  新特性分支
- release 分支 
- hotfix 分支   修复bug

**Git 分支规范之前，先说下在系统开发过程中常用的环境。**

- DEV 环境：用于开发者调试使用。
- FAT 环境：功能验收测试环境，用于测试环境下的软件测试者测试使用。
- UAT 环境：用户验收测试环境，用于生产环境下的软件测试者测试使用。
- PRO 环境：就是生产环境。
- 

https://zhuanlan.zhihu.com/p/108385922

**master分支**

`master` 为主分支，用于部署到正式环境（PRO），一般由 `release` 或 `hotfix` 分支合并，任何情况下不允许直接在 master 分支上修改代码。

**develop 分支**

`develop` 为测试分支，用于部署到测试环境（FAT），始终保持最新完成以及 bug 修复后的代码，可根据需求大小程度确定是由 `feature` 分支合并，还是直接在上面开发。

一定是满足测试的代码才能往上面合并或提交。

**feature 分支**

`feature` 为需求开发分支，命名规则为 `feature-` 开头，一旦该需求上线，便将其删除。

**release 分支**

`release` 为预上线分支，用于部署到预上线环境（UAT），始终保持与 `master` 分支一致，一般由 `develop` 或 `hotfix` 分支合并，不建议直接在 `release` 分支上直接修改代码。

如果在 `release` 分支测试出问题，需要回归验证 `develop` 分支看否存在此问题。

**hotfix 分支**

`hotfix` 为紧急修复分支，命名规则为 `hotfix-` 开头。

当线上出现紧急问题需要马上修复时，需要基于 `release` 或 `master` 分支创建 `hotfix` 分支，修复完成后，再合并到 `release` 或 `develop` 分支，一旦修复上线，便将其删除。

### 新需求加入

有一个订单管理的新需求需要开发，首先要创建一个 `feature-order` 分支，问题来了，该分支是基于哪个分支创建？

如果 存在 未测试完毕的需求，就基于 `master` 创建。

如果 不存在 未测试完毕的需求，就基于 `develop` 创建。

1. 需求在 `feature-order` 分支开发完毕，准备提测时，要先确定 `develop` 不存在未测试完毕的需求，这时研发人员才能将将代码合并到 `develop` （测试环境）供测试人员测试。
2. 测试人员在 `develop` （测试环境） 测试通过后，研发人员再将代码发布到 `release` （预上线环境）供测试人员测试。
3. 测试人员在 `release` （预上线环境）测试通过后，研发人员再将代码发布到 `master` （正式环境）供测试人员测试。
4. 测试人员在 `master` (正式环境) 测试通过后，研发人员需要删除 `feature-order` 分支。